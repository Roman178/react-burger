(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{112:function(e,t,r){e.exports={loader:"spinner_loader__3zq4M",load3:"spinner_load3__j5x9Z"}},113:function(e,t,r){e.exports={root:"modal-overlay_root__3Bmoz"}},115:function(e,t,r){e.exports={elemetWrapper:"added-burger-ingredient_elemetWrapper__2E9ZD"}},117:function(e,t,r){e.exports={cards:"ingredients-block_cards__2h5E0"}},16:function(e,t,r){e.exports={root:"profile_root__212L-",list:"profile_list__2lI8E",item:"profile_item__28DST",link:"profile_link__1-1p8",activeLink:"profile_activeLink__3M_rI",wrapper:"profile_wrapper__1Oz3z",form:"profile_form__3yKlC",closeIcon:"profile_closeIcon__10i8d"}},19:function(e,t,r){e.exports={root:"burger-constructor_root__1kSmR",dropOverlayInvisible:"burger-constructor_dropOverlayInvisible__3UQ99",dropOverlay:"burger-constructor_dropOverlay__btr0X",dropOverlayText:"burger-constructor_dropOverlayText__2P6Mo",dropOverlayPlus:"burger-constructor_dropOverlayPlus__354NF",dropOverlayPlusHover:"burger-constructor_dropOverlayPlusHover__rqfxj",elements:"burger-constructor_elements__1mnPz",elemetWrapper:"burger-constructor_elemetWrapper__3IS6P",totalBox:"burger-constructor_totalBox__1xa_w",totalCountWrapper:"burger-constructor_totalCountWrapper__2qF_m",totalCountDigit:"burger-constructor_totalCountDigit__ufvq0",suggestion:"burger-constructor_suggestion__BKRfo"}},20:function(e,t,r){e.exports={link:"order-card_link__FwObm",root:"order-card_root__2-1wS",rootAllOrders:"order-card_rootAllOrders__WlU5k",wrapper:"order-card_wrapper__2lcRB",orderName:"order-card_orderName__Ab1zl",iconsContainer:"order-card_iconsContainer__296Du",ingredientIconWrapper:"order-card_ingredientIconWrapper__10Vev",ingredientIcon:"order-card_ingredientIcon__1BhQO",orderCostClass:"order-card_orderCostClass__2xOkt",statusDisplayNone:"order-card_statusDisplayNone__16yZM"}},211:function(e,t,r){},212:function(e,t,r){"use strict";r.r(t);var n,a,c=r(1),s=r(36),i=r.n(s),o=r(3),u=r.n(o),d=r(7),l=r(8),p=r(6),j=r(23),b=j.d,m=function(){return Object(j.c)()},O=r(5),f=r.n(O),_=r(29),x=r.n(_),h=r(11),g=r(0),v=function(){return Object(g.jsx)("header",{className:x.a.header,children:Object(g.jsx)("nav",{className:x.a.nav,children:Object(g.jsxs)("ul",{className:x.a.navList,children:[Object(g.jsxs)("li",{className:f()(x.a.listItem,"pl-5","pr-5"),children:[Object(g.jsx)(p.BurgerIcon,{type:"primary"}),Object(g.jsx)(h.b,{to:"/",className:f()(x.a.listItemLink,"text text_type_main-default ml-2"),children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(g.jsxs)("li",{className:f()(x.a.listItem,"pl-5","pr-5"),children:[Object(g.jsx)(p.ListIcon,{type:"secondary"}),Object(g.jsx)(h.b,{to:"/feed",className:f()(x.a.listItemLink,"text text_type_main-default ml-2 text_color_inactive"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]}),Object(g.jsx)("li",{className:f()(x.a.listItem,x.a.logoItem),children:Object(g.jsx)(h.b,{to:"/",children:Object(g.jsx)(p.Logo,{})})}),Object(g.jsxs)("li",{className:f()(x.a.listItem,"pl-5","pr-5"),children:[Object(g.jsx)(p.ProfileIcon,{type:"secondary"}),Object(g.jsx)(h.b,{to:"/profile",className:f()(x.a.listItemLink,"text text_type_main-default ml-2 text_color_inactive"),children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})})},y=r(112),N=r.n(y),k=function(){return Object(g.jsx)("div",{className:N.a.loader,children:"Loading..."})},I=r(86),E=r.n(I),w=function(e){var t=e.children,r=b((function(e){return e.ingredients.ingredientsFailed})),n=b((function(e){return e.ingredients.ingredientsRequest}));return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:E.a.app,children:[Object(g.jsx)(v,{}),n?Object(g.jsx)(k,{}):Object(g.jsx)("main",{className:E.a.content,children:r?Object(g.jsxs)("p",{className:"text text_type_main-default mt-10",children:[Object(g.jsx)(p.InfoIcon,{type:"error"}),"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u0430\u0439\u0442\u0438 \u043f\u043e\u0437\u0436\u0435."]}):t})]})})},S=r(14),C=r(217),R=r(119),T=r(9),L=r(32),U=r(2),D=r(19),q=r.n(D),A=r(113),M=r.n(A),F=function(e){var t=e.closeModal,r=Object(c.useRef)(null);return Object(g.jsx)("div",{ref:r,onClick:function(e){e.target===r.current&&t()},className:M.a.root})},P=r(87),W=r.n(P),B=document.getElementById("react-modals"),G=function(e){var t=e.children,r=e.closeModal,n=Object(c.useCallback)((function(e){"Escape"===e.key&&r()}),[r]);return Object(c.useEffect)((function(){return document.addEventListener("keydown",n),function(){return document.removeEventListener("keydown",n)}}),[n]),Object(s.createPortal)(Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(F,{closeModal:r}),Object(g.jsxs)("div",{className:W.a.root,children:[Object(g.jsx)("div",{onClick:r,className:W.a.closeIconBox,children:Object(g.jsx)(p.CloseIcon,{type:"primary"})}),t]})]}),B)},J=r.p+"static/media/order-success.f3932884.png",V=r(88),z=r.n(V),Q=function(){var e=b((function(e){var t;return null===(t=e.order.currentOrder.order)||void 0===t?void 0:t.number})),t=b((function(e){return e.order.orderRequest})),r=b((function(e){return e.order.orderFailed}));return Object(g.jsx)("div",{className:z.a.root,children:t?Object(g.jsx)(k,{}):r?Object(g.jsxs)("p",{className:"text text_type_main-default mt-10",children:[Object(g.jsx)(p.InfoIcon,{type:"error"}),"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437 \u043f\u043e\u0437\u0436\u0435."]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("p",{className:"text text_type_digits-large mb-8",children:e}),Object(g.jsx)("p",{className:"text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(g.jsx)("img",{className:z.a.orderSuccessImg,src:J,alt:"\u0417\u0430\u043a\u0430\u0437 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d"}),Object(g.jsx)("p",{className:"text text_type_main-default mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})})},X=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),r=t[0],n=t[1];return{isOpenModal:r,closeModal:Object(c.useCallback)((function(){n(!1)}),[]),openModal:Object(c.useCallback)((function(){n(!0)}),[])}},H="GET_INGREDIENTS_REQUEST",K="GET_INGREDIENTS_SUCCESS",Z="GET_INGREDIENTS_FAILED",Y="ADD_BUN_TO_BURGER",$="ADD_INGREDIENT_TO_BURGER",ee="REMOVE_INGREDIENT_FROM_BURGER",te="SORT_INGREDIENTS_BURGER",re="REMOVE_ALL_INGREDIENTS_FROM_BURGER",ne="SET_CURRENT_INGREDIENT",ae="REMOVE_CURRENT_INGREDIENT",ce="CREATE_ORDER_REQUEST",se="CREATE_ORDER_SUCCESS",ie="CREATE_ORDER_FAILED",oe="REMOVE_ORDER",ue="INCREASE_INGREDIENT_COUNTER",de="DECREASE_INGREDIENT_COUNTER",le="RESET_COUNTER",pe="SIGNUP_USER_REQUEST",je="SIGNUP_USER_FAILED",be="LOGIN_USER_REQUEST",me="LOGIN_USER_SUCCESS",Oe="LOGIN_USER_FAILED",fe="LOGOUT_USER_SUCCESS",_e="UPDATE_USER_REQUEST",xe="UPDATE_USER_FAILED",he="UPDATE_USER_SUCCESS",ge="WS_CONNECTION_START",ve="WS_CONNECTION_SUCCESS",ye="WS_CONNECTION_CLOSED",Ne="WS_CONNECTION_ERROR",ke="WS_GET_MESSAGE",Ie={wsInit:ge,onOpen:ve,onClose:ye,onError:Ne,wsSendMessage:"WS_SEND_MESSAGE",onMessage:ke},Ee="https://norma.nomoreparties.space/api",we="wss://norma.nomoreparties.space/orders",Se="bun",Ce="sauce",Re="main",Te=(n={},Object(T.a)(n,Se,"\u0411\u0443\u043b\u043a\u0438"),Object(T.a)(n,Ce,"\u0421\u043e\u0443\u0441\u044b"),Object(T.a)(n,Re,"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"),n),Le="accessToken",Ue="refreshToken",De="jwt expired",qe=function(e){return e.ok?e.json():Promise.reject(e)},Ae=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(Ee,"/ingredients")).then(qe).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(d.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(Ee,"/orders"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",authorization:r}}).then(qe).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(Ee,"/auth/register"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(qe).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(Ee,"/auth/login"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(qe).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(Ee,"/auth/logout"),{method:"POST",body:JSON.stringify({token:t}),headers:{"Content-Type":"application/json"}}).then(qe).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(Ee,"/auth/user"),{headers:{Authorization:t}}).then(qe).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(Ee,"/auth/token"),{method:"POST",body:JSON.stringify({token:t}),headers:{"Content-Type":"application/json"}}).then(qe).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(Ee,"/password-reset"),{method:"POST",body:JSON.stringify({email:t}),headers:{"Content-Type":"application/json"}}).then(qe).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(Ee,"/password-reset/reset"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(qe).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(d.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(Ee,"/auth/user"),{method:"PATCH",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:r}}).then(qe).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Qe=function(e){return{type:se,order:e}},Xe=r(219),He=r(114),Ke=r.n(He),Ze=r(220),Ye=r(115),$e=r.n(Ye),et=function(e){var t=e.ingredient,r=e.index,n=e.moveIngredient,a=e.removeIngredient,s=Object(c.useRef)(null),i=Object(Xe.a)({accept:"burgerIngredient",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var a;if(s.current){var c=e.index,i=r;if(c!==i){var o=null===(a=s.current)||void 0===a?void 0:a.getBoundingClientRect(),u=(o.bottom-o.top)/2,d=t.getClientOffset(),l=d?d.y-o.top:0;c<i&&l<u||c>i&&l>u||(n(c,i),e.index=i)}}}}),o=Object(l.a)(i,2),u=o[0].handlerId,d=o[1],j=Object(Ze.a)({type:"burgerIngredient",item:function(){return{id:t._id,index:r}},collect:function(e){return{isDragging:e.isDragging()}}}),b=Object(l.a)(j,2),m=b[0].isDragging?0:1;return(0,b[1])(d(s)),Object(g.jsxs)("div",{className:$e.a.elemetWrapper,ref:s,style:{opacity:m},"data-handler-id":u,children:[Object(g.jsx)("div",{className:"mr-2",children:Object(g.jsx)(p.DragIcon,{type:"primary"})}),Object(g.jsx)(p.ConstructorElement,{text:t.name,thumbnail:t.image,price:t.price,handleClose:function(){return a(t.createdAt,t)}})]},t.name)},tt=function(e){return{type:K,items:e}},rt=function(e){return{type:ne,currentIngredient:e}},nt=function(){return{type:ae}},at=r(221),ct=function(){var e=m(),t=b((function(e){return e.burgerIngredients.items})),r=b((function(e){return e.burgerIngredients.bun})),n=b((function(e){return e.user.isLoggedIn})),a=Object(S.g)(),s=X(),i=s.isOpenModal,o=s.closeModal,j=s.openModal,O=Object(at.a)([Le]),_=Object(l.a)(O,2)[0],x=Object(Xe.a)({accept:"ingredient",collect:function(e){return{canDrop:e.canDrop(),hovered:e.isOver()}},drop:function(t){"bun"===t.type?e({type:Y,bun:t}):e(function(e){return{type:$,addedIngredient:e}}(Object(U.a)(Object(U.a)({},t),{},{createdAt:+new Date}))),e(function(e){return{type:ue,addedIngredient:e}}(t))}}),h=Object(l.a)(x,2),v=h[0],y=v.canDrop,N=v.hovered,k=h[1],I=Object(c.useCallback)((function(r,n){var a,c=t[r];e((a=Ke()(t,{$splice:[[r,1],[n,0,c]]}),{type:te,sortedIngredients:a}))}),[t,e]),E=function(t,r){e({type:ee,removedCreatedAt:t}),e(function(e){return{type:de,addedIngredient:e}}(r))},w=t.reduce((function(e,t){return e+t.price}),0)+2*(null===r||void 0===r?void 0:r.price);return Object(g.jsxs)(g.Fragment,{children:[i&&Object(g.jsx)(G,{closeModal:function(){e({type:oe}),o()},children:Object(g.jsx)(Q,{})}),Object(g.jsxs)("div",{className:q.a.root,ref:k,children:[Object(g.jsxs)("div",{className:f()(q.a.dropOverlayInvisible,Object(T.a)({},q.a.dropOverlay,y)),children:[Object(g.jsx)("p",{className:f()(q.a.dropOverlayText,"text text_type_main-medium"),children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442 \u0432 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(g.jsx)("p",{className:f()(q.a.dropOverlayPlus,Object(T.a)({},q.a.dropOverlayPlusHover,N)),children:"+"})]}),r?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:f()(q.a.elemetWrapper,"mb-4","pr-4"),children:Object(g.jsx)(p.ConstructorElement,{type:"top",isLocked:!0,text:r.name+" (\u0432\u0435\u0440\u0445)",price:r.price,thumbnail:r.image})}),Object(g.jsx)("div",{className:q.a.elements,children:t.map((function(e,t){return Object(g.jsx)(et,{ingredient:e,index:t,moveIngredient:I,removeIngredient:E},e.createdAt)}))}),Object(g.jsx)("div",{className:f()(q.a.elemetWrapper,"mt-4","pr-4"),children:Object(g.jsx)(p.ConstructorElement,{type:"bottom",isLocked:!0,text:r.name+" (\u043d\u0438\u0437)",price:r.price,thumbnail:r.image})}),Object(g.jsxs)("div",{className:f()(q.a.totalBox,"mt-10 pr-5"),children:[Object(g.jsxs)("div",{className:f()(q.a.totalCountWrapper,"mr-10"),children:[Object(g.jsx)("p",{className:f()(q.a.totalCountDigit,"text text_type_digits-medium"),children:!isNaN(w)&&w}),Object(g.jsx)(p.CurrencyIcon,{type:"primary"})]}),Object(g.jsx)(p.Button,{type:"primary",size:"medium",onClick:function(){if(!n)return a.push("/login");var c,s;e((c={ingredients:[].concat(Object(L.a)(t.map((function(e){return e._id}))),[r._id])},s=_.accessToken,function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ce}),e.prev=1,e.next=4,Me(c,s);case 4:r=e.sent,t(Qe(r)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:ie}),console.error("Error in createOrder thunk ",e.t0.status);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())),j(),e({type:re}),e({type:le})},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]}):Object(g.jsxs)("div",{className:q.a.suggestion,children:[Object(g.jsx)("p",{className:"text text_type_main-medium",children:"\u041f\u0435\u0440\u0435\u043d\u043e\u0441\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b."}),Object(g.jsx)("p",{className:"text text_type_main-medium",children:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0441 \u0431\u0443\u043b\u043a\u0438."})]})]})]})},st=r(62),it=r.n(st),ot=r(46),ut=r.n(ot),dt=function(e){var t=e.ingredient,r=Object(S.h)(),n=b((function(e){var r;return null===(r=e.burgerIngredients.quantity.find((function(e){return e.id===t._id})))||void 0===r?void 0:r.qty})),a=m(),c=Object(Ze.a)({type:"ingredient",item:t}),s=Object(l.a)(c,2)[1];return Object(g.jsx)(h.b,{className:ut.a.link,to:{pathname:"/ingredients/".concat(t._id),state:{background:r}},children:Object(g.jsxs)("li",{ref:s,className:ut.a.card,onClick:function(){a(rt(t))},children:[n&&Object(g.jsx)("span",{className:f()(ut.a.quantity,"text text_type_digits-default mr-2"),children:n}),Object(g.jsx)("img",{src:t.image,alt:t.name}),Object(g.jsxs)("div",{className:ut.a.priceBox,children:[Object(g.jsx)("span",{className:"text text_type_digits-default mr-2",children:t.price}),Object(g.jsx)(p.CurrencyIcon,{type:"primary"})]}),Object(g.jsx)("span",{className:f()(ut.a.ingredientName,"text text_type_main-default"),children:t.name})]})})},lt=r(117),pt=r.n(lt),jt=Object(c.forwardRef)((function(e,t){var r=e.ingredientTitle,n=e.filteredIngredients;return Object(g.jsxs)("div",{className:"pb-10",children:[Object(g.jsx)("h3",{className:"text text_type_main-medium mb-6",ref:t,children:r}),Object(g.jsx)("ul",{className:pt.a.cards,children:n.map((function(e){return Object(g.jsx)(dt,{ingredient:e},e._id)}))})]})})),bt=function(){var e,t=b((function(e){return e.ingredients.items})),r=Object(c.useState)(Se),n=Object(l.a)(r,2),a=n[0],s=n[1],i=Object(c.useRef)(null),o=Object(c.useRef)(null),u=Object(c.useRef)(null),d=(e={},Object(T.a)(e,"".concat(Se,"Ref"),i),Object(T.a)(e,"".concat(Ce,"Ref"),o),Object(T.a)(e,"".concat(Re,"Ref"),u),e),j=Object(c.useCallback)((function(e){var t=e.target.getBoundingClientRect().top,r=function(e){return{top:e.current.parentNode.getBoundingClientRect().top,bottom:e.current.parentNode.getBoundingClientRect().bottom}},n=function(e,r){return Math.round(e.top)<=Math.round(t)&&Math.round(e.bottom)>Math.round(t)&&a!==r},c=r(i),d=r(o),l=r(u);return n(c,Se)?s(Se):n(d,Ce)?s(Ce):n(l,Re)?s(Re):void 0}),[a]),m=function(e){var t,r;null===(t=d["".concat(e,"Ref")])||void 0===t||null===(r=t.current)||void 0===r||r.scrollIntoView()};return Object(g.jsxs)("div",{className:it.a.root,children:[Object(g.jsx)("h2",{className:"text text_type_main-large mt-10 mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(g.jsx)("div",{className:it.a.tabs,children:Object.keys(Te).map((function(e){return Object(g.jsx)(p.Tab,{value:e,active:a===e,onClick:m,children:Te[e]},e)}))}),Object(g.jsx)("div",{className:it.a.ingredientsRoot,onScroll:j,children:Object.keys(Te).map((function(e){return Object(g.jsx)(jt,{ref:d["".concat(e,"Ref")],ingredientTitle:Te[e],filteredIngredients:t.filter((function(t){return t.type===e}))},e)}))})]})},mt=function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(C.a,{backend:R.a,children:[Object(g.jsx)(bt,{}),Object(g.jsx)(ct,{})]})})},Ot=r(44),ft=r(63),_t=r.n(ft),xt=function(e){var t=e.buttonText,r=e.inputs,n=e.title,a=e.onSubmit,s=e.suggestedActions,i=Object(c.useMemo)((function(){var e={};return r.forEach((function(t){e[t.name]=""})),e}),[r]),o=Object(c.useState)(i),u=Object(l.a)(o,2),d=u[0],j=u[1],b=function(e){j(Object(U.a)(Object(U.a)({},d),{},Object(T.a)({},e.target.name,e.target.value)))};return Object(g.jsxs)("div",{className:_t.a.root,children:[Object(g.jsxs)("form",{className:f()("mb-20",_t.a.form),onSubmit:function(e){e.preventDefault(),a(d)},children:[Object(g.jsx)("h2",{className:"text text_type_main-medium mb-6",children:n}),r.map((function(e){return Object(g.jsx)("div",{className:"mb-6",children:Object(g.jsx)(p.Input,{name:e.name,type:e.type,onChange:b,value:d[e.name],placeholder:e.placeholder})},e.name)})),Object(g.jsx)(p.Button,{children:t})]}),s.map((function(e){return Object(g.jsxs)("div",{className:"mb-4",children:[Object(g.jsxs)("span",{className:"text text_type_main-default text_color_inactive",children:[e.text,"\xa0"]}),Object(g.jsx)(h.b,{className:f()("text text_type_main-default",_t.a.link),to:e.link,children:e.linkText})]},e.link)}))]})},ht=function(){var e=Object(d.a)(u.a.mark((function e(t,r,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(500!==t.status){e.next=5;break}return r(n("Server error")),e.abrupt("return",Promise.reject({message:"Server error"}));case 5:if(!t.json){e.next=12;break}return e.next=8,t.json().then((function(e){return r(n(e.message)),e}));case 8:return a=e.sent,e.abrupt("return",Promise.reject(a));case 12:return e.abrupt("return",Promise.reject({message:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :("}));case 13:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),gt=function(e){return{type:je,errorMessage:e}},vt=function(){return{type:be}},yt=function(e){return{type:Oe,errorMessage:e}},Nt=function(e){return{type:me,user:e}},kt=function(){return{type:fe}},It=function(e){return{type:he,user:e}},Et=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",We(e).then((function(){r(kt())})).catch((function(){return r(kt())})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},wt=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(vt()),t.abrupt("return",Ge(e).then((function(e){return Be(e.accessToken).then((function(t){return r(Nt(t)),e})).catch((function(e){return ht(e,r,yt)}))})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},St=r(18),Ct=["login"],Rt={login:function(e){return function(){var t=Object(d.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(vt()),t.abrupt("return",Pe(e).then((function(e){return r(Nt({success:e.success,user:{email:e.user.email,name:e.user.name}})),e})).catch((function(e){return ht(e,r,yt)})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Tt=Object(j.b)(void 0,Rt)((function(e){var t,r=e.login,n=(Object(Ot.a)(e,Ct),Object(at.a)([Le,Ue])),a=Object(l.a)(n,2)[1],c=Object(S.g)(),s=Object(S.h)(),i=b((function(e){return e.user.isLoggedIn})),o=b((function(e){return e.user.userLogin.userLoginRequest})),p=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r(t),e.next=4,n;case 4:s=e.sent,a(Le,s.accessToken,{path:"/"}),a(Ue,s.refreshToken,{path:"/"}),c.replace({pathname:"/"}),St.b.success("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0448\u043b\u0438"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),St.b.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return o?Object(g.jsx)(k,{}):Object(g.jsx)(g.Fragment,{children:i?Object(g.jsx)(S.a,{to:{pathname:(null===(t=s.state)||void 0===t?void 0:t.from.pathname)?s.state.from.pathname:"/profile"}}):Object(g.jsx)(xt,{inputs:[{name:"email",placeholder:"email",type:"email"},{name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password"}],buttonText:"\u0412\u043e\u0439\u0442\u0438",title:"\u0412\u0445\u043e\u0434",onSubmit:p,suggestedActions:[{text:"\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",link:"register",linkText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"},{text:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",link:"forgot-password",linkText:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"}]})})})),Lt={signup:function(e){return function(){var t=Object(d.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:pe}),t.abrupt("return",Fe(e).then((function(e){return r(Nt({success:e.success,user:{email:e.user.email,name:e.user.name}})),e})).catch((function(e){return ht(e,r,gt)})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Ut=Object(j.b)(void 0,Lt)((function(e){var t=e.signup,r=Object(at.a)([Le,Ue]),n=Object(l.a)(r,2)[1],a=Object(S.g)(),c=b((function(e){return e.user.isLoggedIn})),s=function(){var e=Object(d.a)(u.a.mark((function e(r){var c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=t(r),e.next=4,c;case 4:s=e.sent,n(Le,s.accessToken,{path:"/"}),n(Ue,s.refreshToken,{path:"/"}),a.replace({pathname:"/profile"}),St.b.success("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0448\u043b\u0438"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),St.b.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return c?Object(g.jsx)(S.a,{to:"/profile"}):Object(g.jsx)(xt,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",inputs:[{name:"name",placeholder:"\u0418\u043c\u044f",type:"text"},{name:"email",placeholder:"E-mail",type:"email"},{name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password"}],onSubmit:s,buttonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",suggestedActions:[{text:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",link:"login",linkText:"\u0412\u043e\u0439\u0442\u0438"}]})})),Dt=function(){var e=Object(S.g)(),t=Object(c.useState)(!1),r=Object(l.a)(t,2),n=r[0],a=r[1],s=function(){var t=Object(d.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(!0),t.next=3,Je(r.email);case 3:a(!1),e.push({pathname:"/reset-password",state:{from:e.location}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:n?Object(g.jsx)(k,{}):Object(g.jsx)(xt,{inputs:[{name:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 E-mail",type:"email"}],buttonText:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",onSubmit:s,suggestedActions:[{text:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",link:"login",linkText:"\u0412\u043e\u0439\u0442\u0438"}]})})},qt=function(){var e=Object(S.g)(),t=Object(c.useState)(!1),r=Object(l.a)(t,2),n=r[0],a=r[1],s=function(){var t=Object(d.a)(u.a.mark((function t(r){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(!0),t.next=4,Ve({password:r.newPassword,token:r.codeFromEmail});case 4:a(!1),St.b.success("\u041f\u0430\u0440\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d"),e.push("/login"),t.next=17;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,t.t0.json();case 13:n=t.sent,St.b.error(n.message),a(!1),e.replace("/forgot-password");case 17:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:"POP"===e.action?Object(g.jsx)(S.a,{to:{pathname:"/forgot-password"}}):Object(g.jsx)(g.Fragment,{children:n?Object(g.jsx)(k,{}):Object(g.jsx)(xt,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",inputs:[{name:"newPassword",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password"},{name:"codeFromEmail",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",type:"text"}],buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:s,suggestedActions:[{text:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",link:"login",linkText:"\u0412\u043e\u0439\u0442\u0438"}]})})})},At=(r(210),r(16)),Mt=r.n(At),Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:ge,payload:{token:e}}},Pt=r(20),Wt=r.n(Pt),Bt=function(e){var t=e.order,r=e.allOrdersType,n=void 0!==r&&r,a=b((function(e){return e.ingredients})),c=t.ingredients.reduce((function(e,t){var r;return e+(null===(r=a.items.find((function(e){return e._id===t})))||void 0===r?void 0:r.price)}),0),s=Object(S.h)();return Object(g.jsx)(h.b,{className:Wt.a.link,to:{pathname:"".concat(s.pathname,"/").concat(t._id),state:{background:s}},children:Object(g.jsxs)("li",{className:f()(Wt.a.root,Object(T.a)({},Wt.a.rootAllOrders,n)),children:[Object(g.jsxs)("div",{className:Wt.a.wrapper,children:[Object(g.jsxs)("p",{className:f()("text text_type_digits-default mb-6",Wt.a.orderNumber),children:["#",t.number]}),Object(g.jsx)("p",{className:f()("text text_type_main-default text_color_inactive",Wt.a.orderCreatedAt),children:t.createdAt})]}),Object(g.jsx)("p",{className:f()("text text_type_main-medium mb-2",Wt.a.orderName,{"mb-6":n}),children:t.name}),Object(g.jsx)("p",{className:f()("text text_type_main-small mb-6",Object(T.a)({},Wt.a.statusDisplayNone,n)),children:t.status}),Object(g.jsxs)("div",{className:Wt.a.wrapper,children:[Object(g.jsx)("div",{className:Wt.a.iconsContainer,children:t.ingredients.map((function(e,t,r){var n,c,s=null===(n=a.items.find((function(t){return t._id===e})))||void 0===n?void 0:n.image_mobile,i=null===(c=a.items.find((function(t){return t._id===e})))||void 0===c?void 0:c.name;return Object(g.jsx)("div",{style:{zIndex:r.length-1-t},className:Wt.a.ingredientIconWrapper,children:Object(g.jsx)("img",{className:Wt.a.ingredientIcon,src:s,alt:i})},t)}))}),Object(g.jsxs)("div",{className:Wt.a.orderCostClass,children:[Object(g.jsx)("p",{className:"text text_type_digits-default mr-2",children:c}),Object(g.jsx)(p.CurrencyIcon,{type:"primary"})]})]})]})})},Gt=r(91),Jt=r.n(Gt),Vt=function(){var e,t=m(),r=Object(at.a)([Le]),n=Object(l.a)(r,1)[0],a=b((function(e){return e.ws.orders})),s=Object(S.h)().pathname;return Object(c.useEffect)((function(){var e;"/feed"===s?t(Ft()):t(Ft(null===(e=n.accessToken)||void 0===e?void 0:e.replace("Bearer ","")));return function(){t({type:ye})}}),[]),Object(g.jsx)("ul",{className:f()(Jt.a.root,Object(T.a)({},Jt.a.rootAllOrders,"/feed"===s)),children:null===(e=a.orders)||void 0===e?void 0:e.map((function(e){return Object(g.jsx)(Bt,{order:e,allOrdersType:"/feed"===s},e._id)}))})},zt=["children"],Qt=function(e){var t=e.children,r=Object(Ot.a)(e,zt),n=b((function(e){return e.user.isLoggedIn}));return Object(g.jsx)(S.b,Object(U.a)(Object(U.a)({},r),{},{render:function(e){return n?t:Object(g.jsx)(S.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Xt={updateUser:function(e,t){return function(){var r=Object(d.a)(u.a.mark((function r(n){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:_e}),r.abrupt("return",ze(e,t).then((function(e){return n(It(e)),e})).catch((function(e){return ht(e,n,yt)})));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},authRefreshToken:wt},Ht=Object(j.b)(void 0,Xt)((function(e){var t=e.updateUser,r=e.authRefreshToken,n=m(),a=Object(at.a)([Le,Ue]),s=Object(l.a)(a,3),i=s[0],o=s[1],j=s[2],O=Object(S.j)(),_=O.path,x=O.url,v=Object(S.h)(),y=b((function(e){return e.user.currentUser.user})),N=y.name,k=y.email,I=Object(c.useState)({name:N,email:k,password:""}),E=Object(l.a)(I,2),w=E[0],C=E[1],R=Object(c.useState)({name:!1,email:!1,password:!1}),L=Object(l.a)(R,2),D=L[0],q=L[1],A=Object(c.useCallback)((function(e){"name"!==e.target.name&&"password"!==e.target.name&&"email"!==e.target.name&&(C({name:N,email:k,password:""}),q({name:!1,email:!1,password:!1}),window.removeEventListener("click",A))}),[k,N]),M=function(e){C(Object(U.a)(Object(U.a)({},w),{},Object(T.a)({},e.target.name,e.target.value)))},F=function(){var e=Object(d.a)(u.a.mark((function e(a,c,s){var d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D[c]){e.next=26;break}return window.removeEventListener("click",A),e.prev=2,e.next=5,t(Object(T.a)({},c,s),i.accessToken);case 5:q((function(e){return Object(U.a)(Object(U.a)({},D),{},Object(T.a)({},c,!e[c]))})),"password"===c&&(C(Object(U.a)(Object(U.a)({},w),{},{password:""})),St.b.success("\u041f\u0430\u0440\u043e\u043b\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d")),e.next=24;break;case 9:if(e.prev=9,e.t0=e.catch(2),e.t0.message!==De){e.next=24;break}return e.prev=12,e.next=15,r(i.refreshToken);case 15:d=e.sent,o(Le,d.accessToken),o(Ue,d.refreshToken),q((function(e){return Object(U.a)(Object(U.a)({},D),{},Object(T.a)({},c,!e[c]))})),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(12),n(Et(i.refreshToken));case 24:e.next=28;break;case 26:window.addEventListener("click",A),q((function(e){return Object(U.a)(Object(U.a)({},D),{},Object(T.a)({},c,!e[c]))}));case 28:case"end":return e.stop()}}),e,null,[[2,9],[12,21]])})));return function(t,r,n){return e.apply(this,arguments)}}(),P=function(e,t){C(Object(U.a)(Object(U.a)({},w),{},Object(T.a)({},e,t))),q((function(t){return Object(U.a)(Object(U.a)({},D),{},Object(T.a)({},e,!t[e]))})),window.removeEventListener("click",A)};return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:Mt.a.root,children:[Object(g.jsxs)("ul",{className:Mt.a.list,children:[Object(g.jsx)("li",{className:Mt.a.item,children:Object(g.jsx)(h.b,{className:f()("text text_type_main-medium text_color_inactive",Mt.a.link,Object(T.a)({},Mt.a.activeLink,"/profile"===v.pathname)),to:"/profile",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(g.jsx)("li",{className:f()(Mt.a.item),children:Object(g.jsx)(h.c,{className:f()("text text_type_main-medium text_color_inactive",Mt.a.link),activeClassName:Mt.a.activeLink,to:"".concat(x,"/orders"),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(g.jsx)("li",{onClick:function(){n(Et(i.refreshToken)),j(Le),j(Ue)},className:f()("text text_type_main-medium text_color_inactive",Mt.a.item),children:"\u0412\u044b\u0445\u043e\u0434"})]}),"/profile"===v.pathname&&Object(g.jsxs)("form",{className:Mt.a.form,children:[Object(g.jsxs)("div",{className:Mt.a.wrapper,children:[Object(g.jsx)(p.Input,{value:w.name,name:"name",onChange:M,placeholder:"\u0418\u043c\u044f",icon:D.name?"CheckMarkIcon":"EditIcon",onIconClick:function(e){return F(e,"name",w.name)},disabled:!D.name}),D.name&&Object(g.jsx)("div",{className:Mt.a.closeIcon,children:Object(g.jsx)(p.CloseIcon,{onClick:function(){return P("name",N)},type:"primary"})})]}),Object(g.jsxs)("div",{className:Mt.a.wrapper,children:[Object(g.jsx)(p.Input,{type:"email",value:w.email,name:"email",onChange:M,placeholder:"\u041b\u043e\u0433\u0438\u043d",icon:D.email?"CheckMarkIcon":"EditIcon",onIconClick:function(e){return F(e,"email",w.email)},disabled:!D.email}),D.email&&Object(g.jsx)("div",{className:Mt.a.closeIcon,children:Object(g.jsx)(p.CloseIcon,{onClick:function(){return P("email",k)},type:"primary"})})]}),Object(g.jsxs)("div",{className:Mt.a.wrapper,children:[Object(g.jsx)(p.Input,{value:w.password,name:"password",type:"password",onChange:M,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:D.password?"CheckMarkIcon":"EditIcon",onIconClick:function(e){return F(e,"password",w.password)},disabled:!D.password}),D.password&&Object(g.jsx)("div",{className:Mt.a.closeIcon,children:Object(g.jsx)(p.CloseIcon,{onClick:function(){return P("password","")},type:"primary"})})]})]}),Object(g.jsx)(S.d,{children:Object(g.jsx)(Qt,{path:"".concat(_,"/orders"),children:Object(g.jsx)(Vt,{})})})]})})})),Kt=r(33),Zt=r.n(Kt),Yt=function(){var e=b((function(e){return e.ws.orders})),t=e.orders,r=e.total,n=e.totalToday;return Object(g.jsxs)("div",{className:Zt.a.root,children:[Object(g.jsxs)("div",{className:Zt.a.wrapper,children:[Object(g.jsx)("h1",{className:"text text_type_main-large mt-10 mb-4",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(g.jsx)(Vt,{})]}),Object(g.jsxs)("div",{className:Zt.a.totalWrapper,children:[Object(g.jsxs)("div",{className:Zt.a.ordersWrapper,children:[Object(g.jsxs)("div",{className:Zt.a.doneOrdersWrapper,children:[Object(g.jsx)("p",{className:"text text_type_main-medium mb-2",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(g.jsx)("div",{className:Zt.a.doneOrders,children:t&&t.filter((function(e){return"done"===e.status})).map((function(e){return Object(g.jsx)("p",{className:f()("text text_type_digits-default mb-2",Zt.a.doneOrderNumber),children:e.number},e._id)}))})]}),Object(g.jsxs)("div",{className:Zt.a.inProgressOrdersWrapper,children:[Object(g.jsx)("p",{className:"text text_type_main-medium mb-2",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(g.jsx)("div",{className:Zt.a.inProgressOrders,children:Object(g.jsx)("p",{children:t&&t.filter((function(e){return"pending"===e.status})).map((function(e){return Object(g.jsx)("p",{className:"text text_type_digits-default mb-2",children:e.number},e._id)}))})})]})]}),Object(g.jsx)("p",{className:"text text_type_main-default mt-2 mb-2",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0451 \u0432\u0440\u0435\u043c\u044f"}),Object(g.jsx)("p",{className:"text text_type_digits-medium",children:r}),Object(g.jsx)("p",{className:"text text_type_main-default mt-2 mb-2",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f"}),Object(g.jsx)("p",{className:"text text_type_digits-medium",children:n})]})]})},$t=r(37),er=r.n($t),tr=function(){var e=b((function(e){return e.currentIngredient})),t=e.image_large,r=e.name,n=e.calories,a=e.proteins,s=e.fat,i=e.carbohydrates,o=Object(S.i)(),u=b((function(e){return e.ingredients.items})),d=m(),l=Object(S.g)(),p=Object(S.h)();return Object(c.useEffect)((function(){"POP"===l.action&&l.replace({pathname:p.pathname,state:void 0})}),[]),Object(c.useEffect)((function(){if(o.id&&u.length>0){var e=u.find((function(e){return e._id===o.id}));d(rt(e))}return function(){return d(nt())}}),[o.id,u,d]),Object(g.jsxs)("div",{className:er.a.root,children:[Object(g.jsx)("p",{className:f()(er.a.title,"text text_type_main-large"),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(g.jsx)("img",{className:"mb-4",src:t,alt:r}),Object(g.jsx)("p",{className:"text text_type_main-medium mb-8",children:r}),Object(g.jsxs)("div",{className:er.a.info,children:[Object(g.jsxs)("div",{className:er.a.nutritionalValue,children:[Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-2",children:"\u041a\u0430\u043b\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:n})]}),Object(g.jsxs)("div",{className:er.a.nutritionalValue,children:[Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-2",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:a})]}),Object(g.jsxs)("div",{className:er.a.nutritionalValue,children:[Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-2",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:s})]}),Object(g.jsxs)("div",{className:er.a.nutritionalValue,children:[Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-2",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:i})]})]})]})},rr=r(26),nr=r.n(rr),ar=function(){var e=Object(S.i)(),t=Object(S.h)().pathname,r=Object(at.a)([Le]),n=Object(l.a)(r,1)[0],a=m(),s=b((function(t){var r;return null===(r=t.ws.orders.orders)||void 0===r?void 0:r.find((function(t){return t._id===e.orderId}))}));Object(c.useEffect)((function(){var e;s||(t.includes("/feed")?a(Ft()):a(Ft(null===(e=n.accessToken)||void 0===e?void 0:e.replace("Bearer ",""))))}),[]);var i=b((function(e){var t=null===s||void 0===s?void 0:s.ingredients.map((function(t){var r,n;return null===(r=e.ingredients.items)||void 0===r||null===(n=r.find((function(e){return e._id===t})))||void 0===n?void 0:n.price}));return null===t||void 0===t?void 0:t.reduce((function(e,t){return e+t}),0)})),o=Array.from(new Set(null===s||void 0===s?void 0:s.ingredients)),u=b((function(e){return o.map((function(t){var r;return null===(r=e.ingredients.items)||void 0===r?void 0:r.find((function(e){return e._id===t}))}))}));return s?Object(g.jsxs)("div",{className:f()("p-8",nr.a.root),children:[Object(g.jsxs)("p",{className:f()("mb-10 text text_type_digits-default",nr.a.orderNumber),children:["#",s.number]}),Object(g.jsx)("p",{className:f()("mb-3 text text_type_main-medium",nr.a.orderName),children:s.name}),Object(g.jsx)("p",{className:f()("mb-15 text text_type_main-small",nr.a.orderStatus),children:s.status}),Object(g.jsx)("p",{className:"mb-6 text text_type_main-medium",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(g.jsx)("div",{className:nr.a.ingredientsWrapper,children:u.reverse().map((function(e){return Object(g.jsxs)("div",{className:f()("mb-4",nr.a.ingredientDetails),children:[Object(g.jsxs)("div",{className:nr.a.imgNameContainer,children:[Object(g.jsx)("div",{className:nr.a.imgWrapper,children:Object(g.jsx)("img",{className:nr.a.img,src:null===e||void 0===e?void 0:e.image_mobile,alt:null===e||void 0===e?void 0:e.name})}),Object(g.jsx)("p",{className:"text text_type_main-default",children:null===e||void 0===e?void 0:e.name})]}),Object(g.jsxs)("p",{className:f()("text text_type_main-medium",nr.a.price),children:["bun"===(null===e||void 0===e?void 0:e.type)?"2":s.ingredients.filter((function(t){return t===(null===e||void 0===e?void 0:e._id)})).length," ","x ",null===e||void 0===e?void 0:e.price,Object(g.jsx)(p.CurrencyIcon,{type:"primary"})]})]},null===e||void 0===e?void 0:e._id)}))}),Object(g.jsxs)("div",{className:nr.a.totalContainer,children:[Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:s.createdAt}),Object(g.jsxs)("p",{className:f()("text text_type_digits-default",nr.a.totalCostClass),children:[Object(g.jsx)("span",{className:"mr-2",children:i})," ",Object(g.jsx)(p.CurrencyIcon,{type:"primary"})]})]})]}):null},cr={authAccessToken:function(e){return function(){var t=Object(d.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(vt()),t.abrupt("return",Be(e).then((function(e){return r(Nt(e)),e})).catch((function(e){return ht(e,r,yt)})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},authRefreshToken:wt},sr=Object(j.b)(void 0,cr)((function(e){var t,r=e.authAccessToken,n=e.authRefreshToken,a=Object(at.a)([Le,Ue]),s=Object(l.a)(a,2),i=s[0],o=s[1],p=m(),j=b((function(e){return e.user.userSignup.userSignupRequest})),O=b((function(e){return e.user.userLogin.userLoginRequest})),f=j||O;Object(c.useEffect)((function(){p(function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:H}),e.prev=1,e.next=4,Ae();case 4:r=e.sent,t(tt(r)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:Z}),console.error("Error in getIngredients thunk ",e.t0.status);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[p]);var _=Object(c.useCallback)(Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(i.accessToken);case 3:e.next=28;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.message!==De){e.next=21;break}return e.prev=8,e.next=11,n(i.refreshToken);case 11:t=e.sent,o(Le,t.accessToken),o(Ue,t.refreshToken),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(8),p(yt(e.t1.message));case 19:e.next=28;break;case 21:if("You should be authorised"!==e.t0.message){e.next=26;break}return p(yt("")),e.abrupt("return");case 26:p(yt(e.t0.message)),St.b.error(e.t0.message);case 28:case"end":return e.stop()}}),e,null,[[0,5],[8,16]])}))),[]);Object(c.useEffect)((function(){_()}),[_]);var x=X().closeModal,h=Object(S.g)(),v=Object(S.h)(),y=null===(t=v.state)||void 0===t?void 0:t.background;return Object(g.jsxs)(w,{children:[f?Object(g.jsx)(k,{}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(S.d,{location:y||v,children:[Object(g.jsx)(S.b,{path:"/",exact:!0,children:Object(g.jsx)(mt,{})}),Object(g.jsx)(S.b,{path:"/login",exact:!0,children:Object(g.jsx)(Tt,{})}),Object(g.jsx)(S.b,{path:"/register",exact:!0,children:Object(g.jsx)(Ut,{})}),Object(g.jsx)(Qt,{path:"/profile",exact:v.pathname.includes("/profile/orders/")&&!y,children:Object(g.jsx)(Ht,{})}),Object(g.jsx)(Qt,{path:"/profile/orders/:orderId",children:Object(g.jsx)(ar,{})}),Object(g.jsx)(S.b,{path:"/forgot-password",exact:!0,children:Object(g.jsx)(Dt,{})}),Object(g.jsx)(S.b,{path:"/reset-password",exact:!0,children:Object(g.jsx)(qt,{})}),Object(g.jsx)(S.b,{path:"/feed",exact:!0,children:Object(g.jsx)(Yt,{})}),Object(g.jsx)(S.b,{path:"/feed/:orderId",exact:!0,children:Object(g.jsx)(ar,{})}),Object(g.jsx)(S.b,{path:"/ingredients/:id",children:Object(g.jsx)(tr,{})})]}),y&&Object(g.jsxs)(S.d,{children:[Object(g.jsx)(S.b,{path:"/ingredients/:id",children:Object(g.jsx)(G,{closeModal:function(){p(nt()),x(),h.goBack()},children:Object(g.jsx)(tr,{})})}),Object(g.jsx)(S.b,{path:"/feed/:orderId",children:Object(g.jsx)(G,{closeModal:function(){return h.goBack()},children:Object(g.jsx)(ar,{})})}),Object(g.jsx)(Qt,{path:"/profile/orders/:orderId",children:Object(g.jsx)(G,{closeModal:function(){return h.goBack()},children:Object(g.jsx)(ar,{})})})]})]}),Object(g.jsx)(St.a,{})]})})),ir=(r(211),r(218)),or=r(35),ur=r(118),dr={items:[],ingredientsRequest:!1,ingredientsFailed:!1},lr={items:[],bun:null,quantity:[]},pr=function(e,t){var r=e.quantity;if(!e.bun&&"bun"!==t.type)return[];var n=r.find((function(e){return e.id===t._id}));return"bun"===t.type?[].concat(Object(L.a)(r.filter((function(e){return"bun"!==e.type}))),[{id:t._id,type:t.type,qty:2}]):n?[].concat(Object(L.a)(r.filter((function(e){return e.id!==n.id}))),[Object(U.a)(Object(U.a)({},n),{},{qty:n.qty+1})]):[].concat(Object(L.a)(r),[{id:t._id,type:t.type,qty:1}])},jr=function(e,t){var r=e.find((function(e){return e.id===t._id}));return 1===r.qty?Object(L.a)(e.filter((function(e){return e.id!==r.id}))):[].concat(Object(L.a)(e.filter((function(e){return e.id!==r.id}))),[Object(U.a)(Object(U.a)({},r),{},{qty:r.qty-1})])},br={currentOrder:{},orderRequest:!1,orderFailed:!1},mr={},Or={currentUser:{success:!1,user:{email:"",name:""}},userSignup:{userSignupRequest:!1,userSignupFailed:{status:!1,message:""}},userLogin:{userLoginRequest:!1,userLoginFailed:{status:!1,message:""}},userUpdate:{userUpdateRequest:!1,userUpdateFailed:{status:!1,message:""}},isLoggedIn:!1},fr={wsConnected:!1,orders:{}},_r=Object(or.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(U.a)(Object(U.a)({},e),{},{ingredientsRequest:!0});case K:return Object(U.a)(Object(U.a)({},e),{},{ingredientsRequest:!1,ingredientsFailed:!1,items:t.items});case Z:return Object(U.a)(Object(U.a)({},e),{},{ingredientsRequest:!1,ingredientsFailed:!0});default:return e}},burgerIngredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(U.a)(Object(U.a)({},e),{},{bun:t.bun});case $:return e.bun?Object(U.a)(Object(U.a)({},e),{},{items:[].concat(Object(L.a)(e.items),[t.addedIngredient])}):e;case ee:return Object(U.a)(Object(U.a)({},e),{},{items:Object(L.a)(e.items).filter((function(e){return e.createdAt!==t.removedCreatedAt}))});case te:return Object(U.a)(Object(U.a)({},e),{},{items:t.sortedIngredients});case re:return Object(U.a)(Object(U.a)({},e),{},{items:[],bun:null});case ue:return Object(U.a)(Object(U.a)({},e),{},{quantity:pr(e,t.addedIngredient)});case de:return Object(U.a)(Object(U.a)({},e),{},{quantity:jr(e.quantity,t.addedIngredient)});case le:return Object(U.a)(Object(U.a)({},e),{},{quantity:[]});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:br,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(U.a)(Object(U.a)({},e),{},{orderRequest:!0});case se:return Object(U.a)(Object(U.a)({},e),{},{orderRequest:!1,orderFailed:!1,currentOrder:t.order});case ie:return Object(U.a)(Object(U.a)({},e),{},{orderRequest:!1,orderFailed:!0});case oe:return br;default:return e}},currentIngredient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return t.currentIngredient;case ae:return mr;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Or,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return Object(U.a)(Object(U.a)({},e),{},{userSignup:{userSignupRequest:!0,userSignupFailed:{status:!1,message:""}}});case je:return Object(U.a)(Object(U.a)({},e),{},{userSignup:{userSignupRequest:!1,userSignupFailed:{status:!0,message:t.errorMessage}},isLoggedIn:!1});case be:return Object(U.a)(Object(U.a)({},e),{},{userLogin:{userLoginRequest:!0,userLoginFailed:{status:!1,message:""}}});case Oe:return Object(U.a)(Object(U.a)({},e),{},{userLogin:{userLoginRequest:!1,userLoginFailed:{status:!0,message:t.errorMessage}},isLoggedIn:!1});case me:return Object(U.a)(Object(U.a)({},e),{},{currentUser:t.user,userSignup:{userSignupRequest:!1,userSignupFailed:{status:!1,message:""}},userLogin:{userLoginRequest:!1,userLoginFailed:{status:!1,message:""}},isLoggedIn:!0});case fe:return Object(U.a)(Object(U.a)({},e),{},{currentUser:{success:!1,user:{email:"",name:""}},isLoggedIn:!1});case _e:return Object(U.a)(Object(U.a)({},e),{},{userUpdate:{userUpdateRequest:!0,userUpdateFailed:{status:!1,message:""}}});case xe:return Object(U.a)(Object(U.a)({},e),{},{userUpdate:{userUpdateRequest:!1,userUpdateFailed:{status:!0,message:t.errorMessage}}});case he:return Object(U.a)(Object(U.a)({},e),{},{currentUser:t.user,userUpdate:{userUpdateRequest:!1,userUpdateFailed:{status:!1,message:""}}});default:return e}},ws:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return Object(U.a)(Object(U.a)({},e),{},{wsConnected:!0});case Ne:case ye:return{wsConnected:!1,orders:{}};case ke:var r;return Object(U.a)(Object(U.a)({},e),{},{orders:Object(U.a)(Object(U.a)({},t.payload),{},{orders:null===(r=t.payload.orders)||void 0===r?void 0:r.reverse()})});default:return e}}}),xr=["success"],hr=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||or.c)(Object(or.a)(ur.a,(a=Ie,function(e){var t=null;return function(r){return function(n){var c=e.dispatch,s=n.type,i=n.payload,o=a.wsInit,u=a.onOpen,d=a.onClose,l=a.onError,p=a.onMessage;s===o&&(t=i.token?new WebSocket("".concat(we,"?token=").concat(i.token)):new WebSocket("".concat(we,"/all"))),t&&(t.onopen=function(e){c({type:u,payload:e})},t.onerror=function(e){return c({type:l,payload:e})},t.onmessage=function(e){var t=e.data,r=JSON.parse(t),n=(r.success,Object(Ot.a)(r,xr));c({type:p,payload:n})},t.onclose=function(e){return c({type:d,payload:e})}),r(n)}}}))),gr=Object(or.d)(_r,hr);i.a.render(Object(g.jsx)(ir.a,{children:Object(g.jsx)(j.a,{store:gr,children:Object(g.jsx)(h.a,{children:Object(g.jsx)(sr,{})})})}),document.getElementById("root"))},26:function(e,t,r){e.exports={root:"order-info_root__15UJh",ingredientsWrapper:"order-info_ingredientsWrapper__1rpEe",ingredientDetails:"order-info_ingredientDetails__1GjPm",orderName:"order-info_orderName__17TNA",orderNumber:"order-info_orderNumber__2DN36",orderStatus:"order-info_orderStatus__23gRw",price:"order-info_price__sNxEd",imgNameContainer:"order-info_imgNameContainer__2VXV3",imgWrapper:"order-info_imgWrapper__-kK6T",img:"order-info_img__3xY-m",totalContainer:"order-info_totalContainer__1z5_P",totalCostClass:"order-info_totalCostClass__303sr"}},29:function(e,t,r){e.exports={header:"app-header_header__1iHLW",nav:"app-header_nav__1_idE",navList:"app-header_navList__2loy4",listItem:"app-header_listItem__3hdw9",listItemLink:"app-header_listItemLink__39IKy",logoItem:"app-header_logoItem__3QFK4"}},33:function(e,t,r){e.exports={root:"feed_root__lcy8i",title:"feed_title__yRxeu",totalWrapper:"feed_totalWrapper__25yLr",ordersWrapper:"feed_ordersWrapper__2SwAb",doneOrdersWrapper:"feed_doneOrdersWrapper__34Mhy",doneOrders:"feed_doneOrders__3Pq0w",doneOrderNumber:"feed_doneOrderNumber__3-UU0",inProgressOrdersWrapper:"feed_inProgressOrdersWrapper__1ZvW1"}},37:function(e,t,r){e.exports={root:"ingredient-details_root__2LuS_",title:"ingredient-details_title__2_5MB",info:"ingredient-details_info__14J0F",nutritionalValue:"ingredient-details_nutritionalValue__39b2X"}},46:function(e,t,r){e.exports={link:"ingredient-card_link__2SBZJ",card:"ingredient-card_card__1cRZ7",quantity:"ingredient-card_quantity__37EJ8"}},62:function(e,t,r){e.exports={root:"burger-ingredients_root__BqyBa",ingredientsRoot:"burger-ingredients_ingredientsRoot__Mm5dV",tabs:"burger-ingredients_tabs__1yNyE",ingredientName:"burger-ingredients_ingredientName__2NN53",priceBox:"burger-ingredients_priceBox__3fetX"}},63:function(e,t,r){e.exports={root:"form_root__XQwvW",form:"form_form__1Ljzh",link:"form_link__2gzSK"}},86:function(e,t,r){e.exports={app:"layout_app__1PX9S",content:"layout_content__2DcUL"}},87:function(e,t,r){e.exports={root:"modal_root__QSEqe",closeIconBox:"modal_closeIconBox__17w0E"}},88:function(e,t,r){e.exports={root:"order-details_root__2yQn2",orderSuccessImg:"order-details_orderSuccessImg__3uHbU",orderIdText:"order-details_orderIdText__2MKi3",orderStatus:"order-details_orderStatus__3tYLQ",orderNote:"order-details_orderNote__3oaXb"}},91:function(e,t,r){e.exports={root:"orders-feed_root__37z-6",rootAllOrders:"orders-feed_rootAllOrders__2vvRJ"}}},[[212,1,2]]]);
//# sourceMappingURL=main.386108c3.chunk.js.map